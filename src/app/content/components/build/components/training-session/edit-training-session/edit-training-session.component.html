<div class="component-container" fxLayout="column" fxLayoutAlign="center center" fxLayoutGap="16px">
  <h2 class="section-header" mat-dialog-title>{{ isNewSession ? CREATE_SESSION_TITLE_VALUE : EDIT_SESSION_TITLE_VALUE }}</h2>

  <mat-stepper class="mat-elevation-z5" [orientation]="stepperOrientation" [linear]="true" labelPosition="bottom" #editTrainingSessionStepper>

    <!-- Step 1 -->
    <mat-step [stepControl]="stepOne.youtubeVideoDataForm" errorMessage="Error collecting video data." [editable]="true">
      <ng-template matStepLabel>{{ INPUT_YOUTUBE_VIDEO_URL_STEP_LABEL }}</ng-template>
      
      <app-edit-training-session-step-one [editTrainingSessionStepper]="editTrainingSessionStepper" #stepOne></app-edit-training-session-step-one>
      
      <div class="stepper-buttons" fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="8px">
      
        <button *ngIf="!(getYoutubeVideoDataProcessing$ | async)" [disabled]="stepOne.videoUrl?.invalid" mat-raised-button color="primary" type="button" (click)="stepOne.onGetYoutubeVideoData()">
          {{ FETCH_VIDEO_DATA_BUTTON_VALUE }}
        </button>
        <div *ngIf="(getYoutubeVideoDataProcessing$ | async)" fxLayout="column" fxLayoutAlign="center center">
          <mat-progress-spinner diameter=40 color="primary" mode="indeterminate"></mat-progress-spinner>
        </div>
        
        <button *ngIf="!(getYoutubeVideoDataProcessing$ | async)" mat-raised-button type="button" (click)="navigateUserToBrowse()">
          {{ CANCEL_BUTTON_VALUE }}
        </button>
      
      </div>
    </mat-step>

    <!-- Step 2 -->
    <mat-step [stepControl]="stepTwo.trainingSessionForm" errorMessage="Form is not complete.">
      <ng-template matStepLabel>{{ INPUT_SESSION_DATA_STEP_LABEL }}</ng-template>

      <app-edit-training-session-step-two #stepTwo></app-edit-training-session-step-two>
      
      <div class="stepper-buttons" fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="8px">
            
        <button *ngIf="!(serverRequestProcessing$ | async)" [disabled]="!stepTwo.trainingSessionForm.valid" mat-raised-button color="primary" type="button" (click)="onSubmitTrainingSessionForm(stepTwo)">
          {{ isNewSession ? CREATE_SESSION_BUTTON_VALUE : EDIT_SESSION_BUTTON_VALUE }}
        </button>
        <div *ngIf="(serverRequestProcessing$ | async)" fxLayout="column" fxLayoutAlign="center center">
          <mat-progress-spinner diameter=40 color="primary" mode="indeterminate"></mat-progress-spinner>
        </div>

        <button *ngIf="!(serverRequestProcessing$ | async)" mat-raised-button type="button" (click)="navigateUserToBrowse()">
          {{ CANCEL_BUTTON_VALUE }}
        </button>

      </div>
    </mat-step>


  </mat-stepper>

  <div *ngIf="(youtubeVideoData$ | async) as videoData" fxLayout="column" fxLayoutAlign="center start" fxLayoutGap="16px">
    <img class="video-thumbnail" [src]="videoData.thumbnailUrl" alt="Video Thumbnail">
    <div class="video-details-container" fxLayout="column" fxLayoutGap="16px">
      <div><span class="video-details-prefix">{{ TITLE_BLURB }}:</span> {{ videoData.title }}</div>
      <div><span class="video-details-prefix">{{ CHANNEL_BLURB }}:</span> {{ videoData.channelTitle }}</div>
      <div><span class="video-details-prefix">{{ DURATION_BLURB }}:</span> {{ videoData.durationIso | durationToMmSs }}</div>
    </div>
  </div>


</div>
