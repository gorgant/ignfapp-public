<div class="tab-contents" fxLayout="column" fxLayoutAlign="center center">
  <div *ngIf="(userData$ | async)?.isAdmin && !trainingPlanBuilderRequest" class="actions-container" fxLayout="column" fxLayoutAlign="center center" >
    <button class="create-button" mat-raised-button color="primary" (click)="onCreateTrainingSession()">{{ CREATE_SESSION_BUTTON_VALUE }}</button>
  </div>
  <button fxFlexAlign="start" *ngIf="trainingPlanBuilderRequest" class="back-button" mat-button color="primary" (click)="onReturnToEditPlan()">
    <mat-icon>arrow_back</mat-icon> {{ RETURN_TO_EDIT_PLAN_BUTTON_VALUE }}
  </button>
  <div class="search-options-container" fxLayout="row" fxLayoutAlign="start center" fxLayoutAlign.gt-xs="center center">
    <mat-form-field class="search-form-field">
      <mat-icon *ngIf="!searchInput.focused" matPrefix class="search-icon">search</mat-icon>
      <mat-placeholder>{{ SEARCH_VIDEO_OR_CHANNEL_TITLE_PLACEHOLDER }}</mat-placeholder>
      <input matInput type="text" [(ngModel)]="searchText" class="search-input" #searchInput="matInput">
      <button class="close-search-button" *ngIf="searchText" matSuffix mat-icon-button aria-label="Clear" (click)="searchText=''">
        <mat-icon>close</mat-icon>
      </button>
    </mat-form-field>
    <button mat-icon-button (click)="onToggleFilters()">
      <mat-icon [ngClass]="{'filters-icon-active': filtersActive}">tune</mat-icon>
    </button>
  </div>
  <div [fxHide]="!showFilters" class="filters-container">
    <app-training-session-filters #trainingSessionFilters></app-training-session-filters>
    <div class="filter-actions" fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="16px">
      <button class="filter-button" mat-raised-button color="primary" (click)="onApplyFilters()">Apply Filters</button>
      <button class="filter-button" mat-stroked-button color="primary" (click)="onClearFilters()">Clear Filters</button>
    </div>
  </div>
  <cdk-virtual-scroll-viewport *ngIf="!trainingPlanBuilderRequest" [itemSize]="trainingSessionCardHeight" class="scrolling-container">
    <div class="training-session-card-container" [ngClass]="{'plan-builder': trainingPlanBuilderRequest}" *cdkVirtualFor="let session of trainingSessionFilters.filteredTrainingSessions | trainingSessionSearchFilter: searchText" fxLayout="column" fxLayoutGap="8px">
      <app-training-session-card [trainingSesssionData]="session" [trainingPlanBuilderRequest]="trainingPlanBuilderRequest" fxLayout="column" ></app-training-session-card>
    </div>
  </cdk-virtual-scroll-viewport>
  <ng-container *ngIf="trainingPlanBuilderRequest">
    <div class="training-session-card-container" [ngClass]="{'plan-builder': trainingPlanBuilderRequest}" *ngFor="let session of trainingSessionFilters.filteredTrainingSessions | trainingSessionSearchFilter: searchText" fxLayout="column" fxLayoutGap="8px">
      <app-training-session-card [trainingSesssionData]="session" [trainingPlanBuilderRequest]="trainingPlanBuilderRequest" fxLayout="column" ></app-training-session-card>
    </div>
  </ng-container>
</div>
<div *ngIf="(fetchAllTrainingSessionsProcessing$ | async)" fxLayout="column" fxLayoutAlign="center center" class="loading-spinner">
  <mat-progress-spinner diameter=40 color="primary" mode="indeterminate"></mat-progress-spinner>
</div>